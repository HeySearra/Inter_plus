{"version":3,"sources":["webpack:///./src/views/manages/uploadPrepare.vue?6c79","webpack:///src/views/manages/uploadPrepare.vue","webpack:///./src/views/manages/uploadPrepare.vue?25d2","webpack:///./src/views/manages/uploadPrepare.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","ref","attrs","form","rules","model","value","callback","$$v","$set","expression","uploadFiles","changeFiles","_v","slot","on","onSubmit","resetForm","staticRenderFns","name","data","className","classIntro","files","methods","$refs","validate","valid","message","type","formData","append","i","raw","localStorage","getItem","$axios","post","then","console","log","file","fileList","resetFields","component"],"mappings":"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","file":"js/chunk-2d20fb2b.ab4f50bd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"uploadPrepare\"},[_c('el-row',[_c('el-main',{staticStyle:{\"margin-top\":\"60px\",\"margin-left\":\"60px\",\"margin-right\":\"160px\"}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"100px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"课程名称：\",\"prop\":\"className\"}},[_c('el-input',{model:{value:(_vm.form.className),callback:function ($$v) {_vm.$set(_vm.form, \"className\", $$v)},expression:\"form.className\"}})],1),_c('el-form-item',{attrs:{\"label\":\"课程简介：\",\"prop\":\"classIntro\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.classIntro),callback:function ($$v) {_vm.$set(_vm.form, \"classIntro\", $$v)},expression:\"form.classIntro\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备课文件：\",\"prop\":\"files\"}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"http-request\":_vm.uploadFiles,\"on-change\":_vm.changeFiles,\"action\":\"https://jsonplaceholder.typicode.com/posts/\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\" 将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" 上传备课文件，审核成功后才可上传课程视频 \")])])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即创建\")]),_c('el-button',{on:{\"click\":_vm.resetForm}},[_vm._v(\"取消\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"uploadPrepare\">\n    <el-row>\n      <el-main style=\"margin-top: 60px; margin-left:60px; margin-right: 160px;\">\n        <el-form ref=\"form\" :model=\"form\" label-width=\"100px\" :rules=\"rules\">\n          <el-form-item label=\"课程名称：\" prop=\"className\">\n            <el-input v-model=\"form.className\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"课程简介：\" prop=\"classIntro\">\n            <el-input type=\"textarea\" v-model=\"form.classIntro\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"备课文件：\" prop=\"files\">\n            <el-upload\n              class=\"upload-demo\"\n              drag\n              ref=\"upload\"\n              :http-request=\"uploadFiles\"\n              :on-change=\"changeFiles\"\n              action=\"https://jsonplaceholder.typicode.com/posts/\"\n            >\n              <i class=\"el-icon-upload\"></i>\n              <div class=\"el-upload__text\">\n                将文件拖到此处，或<em>点击上传</em>\n              </div>\n              <div class=\"el-upload__tip\" slot=\"tip\">\n                上传备课文件，审核成功后才可上传课程视频\n              </div>\n            </el-upload>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\n            <el-button @click=\"resetForm\">取消</el-button>\n          </el-form-item>\n        </el-form>\n      </el-main>\n    </el-row>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"uploadPrepare\",\n  data() {\n    return {\n      form: {\n        className: \"\",\n        classIntro: \"\",\n        files: []\n      },\n      rules: {\n        className: [\n          { required: true, message: \"请输入课程名称\", trigger: \"blur\" },\n          { min: 10, max: 40, message: \"在5-20个字之间\", trigger: \"blur\" }\n        ],\n        classIntro: [\n          { required: true, message: \"请输入课程简介\", trigger: \"blur\" },\n          { min: 20, message: \"最少10个字\", trigger: \"blur\" }\n        ],\n        files: [{ required: true, message: \"请上传备课文件\", trigger: \"blur\" }]\n      }\n    };\n  },\n  methods: {\n    onSubmit() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          this.$refs.upload.submit(); //???????????????????\n          this.$message({\n            message: \"提交成功\",\n            type: \"success\"\n          });\n        } else {\n          this.$message({\n            message: \"提交失败\",\n            type: \"error\"\n          });\n        }\n      });\n    },\n    uploadFiles() {\n      let formData = new FormData();\n      for (let i in this.form.files) {\n        formData.append('prepare_file', i.raw); //?????????????????????????\n        formData.append('course_name', this.form.className)\n        formData.append('course_intro', this.form.classIntro)\n        formData.append('user_id', localStorage.getItem('userId')) //?????????????????????????\n      }\n      this.$axios.post('http://127.0.0.1:8000/upload/prepare', formData).then(res=>{\n        if(res.status==0){\n          this.$message({message:'上传备课文件成功', type:'seccess'})\n          this.resetForm()\n        }\n      }).catch(e =>{this.$message({message:e, type:'error'})})\n    },\n    changeFiles(file, fileList) {\n      console.log(file);\n      this.form.files = fileList;\n    },\n    resetForm() {\n      this.$refs.form.resetFields();\n    }\n  }\n};\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadPrepare.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./uploadPrepare.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./uploadPrepare.vue?vue&type=template&id=4561d4fb&scoped=true&\"\nimport script from \"./uploadPrepare.vue?vue&type=script&lang=js&\"\nexport * from \"./uploadPrepare.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4561d4fb\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}