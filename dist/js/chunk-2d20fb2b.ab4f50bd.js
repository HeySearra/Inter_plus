(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20fb2b"],{b579:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"uploadPrepare"},[t("el-row",[t("el-main",{staticStyle:{"margin-top":"60px","margin-left":"60px","margin-right":"160px"}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"课程名称：",prop:"className"}},[t("el-input",{model:{value:e.form.className,callback:function(s){e.$set(e.form,"className",s)},expression:"form.className"}})],1),t("el-form-item",{attrs:{label:"课程简介：",prop:"classIntro"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.form.classIntro,callback:function(s){e.$set(e.form,"classIntro",s)},expression:"form.classIntro"}})],1),t("el-form-item",{attrs:{label:"备课文件：",prop:"files"}},[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","http-request":e.uploadFiles,"on-change":e.changeFiles,action:"https://jsonplaceholder.typicode.com/posts/"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或"),t("em",[e._v("点击上传")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 上传备课文件，审核成功后才可上传课程视频 ")])])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),t("el-button",{on:{click:e.resetForm}},[e._v("取消")])],1)],1)],1)],1)],1)},a=[],l={name:"uploadPrepare",data:function(){return{form:{className:"",classIntro:"",files:[]},rules:{className:[{required:!0,message:"请输入课程名称",trigger:"blur"},{min:10,max:40,message:"在5-20个字之间",trigger:"blur"}],classIntro:[{required:!0,message:"请输入课程简介",trigger:"blur"},{min:20,message:"最少10个字",trigger:"blur"}],files:[{required:!0,message:"请上传备课文件",trigger:"blur"}]}}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate((function(s){s?(e.$refs.upload.submit(),e.$message({message:"提交成功",type:"success"})):e.$message({message:"提交失败",type:"error"})}))},uploadFiles:function(){var e=this,s=new FormData;for(var t in this.form.files)s.append("prepare_file",t.raw),s.append("course_name",this.form.className),s.append("course_intro",this.form.classIntro),s.append("user_id",localStorage.getItem("userId"));this.$axios.post("http://127.0.0.1:8000/upload/prepare",s).then((function(s){0==s.status&&(e.$message({message:"上传备课文件成功",type:"seccess"}),e.resetForm())})).catch((function(s){e.$message({message:s,type:"error"})}))},changeFiles:function(e,s){console.log(e),this.form.files=s},resetForm:function(){this.$refs.form.resetFields()}}},o=l,i=t("2877"),n=Object(i["a"])(o,r,a,!1,null,"4561d4fb",null);s["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d20fb2b.ab4f50bd.js.map